// @ts-nocheck
/**
 * Sistema de Internacionalización (i18n)
 * Traducción Español - Inglés
 */

const translations = {
  es: {
    // Navigation
    nav: {
      inicio: "Inicio",
      sobreMi: "Sobre Mí",
      habilidades: "Habilidades",
      experiencia: "Experiencia",
      proyectos: "Proyectos",
      contacto: "Contacto",
      idioma: "Language"
    },
    
    // Hero Section
    hero: {
      greeting: "Hola, soy",
      name: "Laura Carvajal",
      title: "Frontend Developer & UX/UI Designer",
      description: "Apasionada por crear experiencias digitales excepcionales que combinan diseño intuitivo con código limpio y eficiente.",
      btnProjects: "Ver Proyectos",
      btnContact: "Contactar"
    },
    
    // About Section
    about: {
      title: "Sobre Mí",
      description: "Soy una desarrolladora frontend con sólida experiencia en UX/UI design. Me especializo en crear interfaces modernas, accesibles y centradas en el usuario utilizando las últimas tecnologías web.",
      skills: "Habilidades principales:",
      experience: "Años de experiencia:",
      projects: "Proyectos completados:",
      clients: "Clientes satisfechos:"
    },
    
    // Skills Section
    skills: {
      title: "Habilidades",
      subtitle: "Tecnologías y herramientas que domino",
      categories: {
        frontend: "Frontend",
        backend: "Backend", 
        design: "Diseño",
        tools: "Herramientas"
      }
    },
    
    // Experience Section
    experience: {
      title: "Experiencia",
      subtitle: "Mi trayectoria profesional",
      jobs: {
        frontend: {
          title: "Frontend Developer",
          company: "Tech Solutions Inc.",
          period: "2022 - Presente",
          description: "Desarrollo de aplicaciones web modernas con React, Vue.js y TypeScript. Liderazgo en implementación de mejores prácticas y arquitecturas escalables."
        },
        uxui: {
          title: "UX/UI Designer",
          company: "Digital Agency Co.",
          period: "2020 - 2022",
          description: "Diseño de experiencias de usuario para aplicaciones móviles y web. Investigación de usuarios, wireframing, prototipado y testing de usabilidad."
        },
        education: {
          title: "Especialización en Desarrollo Web",
          company: "Universidad Tecnológica",
          period: "2019 - 2020",
          description: "Formación intensiva en tecnologías web modernas, metodologías ágiles y principios de experiencia de usuario."
        }
      }
    },
    
    // Projects Section
    projects: {
      title: "Proyectos",
      subtitle: "Algunos de mis trabajos destacados",
      viewProject: "Ver Proyecto",
      viewCode: "Ver Código",
      items: {
        portfolio: {
          title: "Portfolio Personal",
          description: "Sitio web personal bilingüe con sistema de temas y diseño responsive desarrollado con HTML5, CSS3 y JavaScript vanilla."
        },
        landing: {
          title: "Landing Page Corporativa",
          description: "Página de aterrizaje moderna para empresa tecnológica con animaciones CSS avanzadas y optimización SEO."
        },
        elearning: {
          title: "Plataforma E-Learning",
          description: "Aplicación web para cursos online con panel de administración, sistema de progreso y evaluaciones interactivas."
        }
      }
    },
    
    // Contact Section
    contact: {
      title: "Contacto",
      subtitle: "¿Tienes un proyecto en mente? ¡Hablemos!",
      info: {
        email: "Email",
        linkedin: "LinkedIn",
        location: "Ubicación",
        locationValue: "Madrid, España"
      },
      form: {
        name: "Nombre completo",
        email: "Correo electrónico", 
        subject: "Asunto",
        message: "Mensaje",
        send: "Enviar Mensaje"
      },
      notifications: {
        success: "¡Mensaje enviado correctamente!",
        error: "Error al enviar el mensaje. Inténtalo de nuevo."
      }
    },
    
    // Footer
    footer: {
      copyright: "© 2024 Laura Carvajal. Todos los derechos reservados.",
      madeWith: "Hecho con ❤️ en España"
    }
  },
  
  en: {
    // Navigation
    nav: {
      inicio: "Home",
      sobreMi: "About",
      habilidades: "Skills",
      experiencia: "Experience", 
      proyectos: "Projects",
      contacto: "Contact",
      idioma: "Idioma"
    },
    
    // Hero Section
    hero: {
      greeting: "Hi, I'm",
      name: "Laura Carvajal",
      title: "Frontend Developer & UX/UI Designer",
      description: "Passionate about creating exceptional digital experiences that combine intuitive design with clean and efficient code.",
      btnProjects: "View Projects",
      btnContact: "Contact Me"
    },
    
    // About Section
    about: {
      title: "About Me",
      description: "I'm a frontend developer with solid experience in UX/UI design. I specialize in creating modern, accessible and user-centered interfaces using the latest web technologies.",
      skills: "Core skills:",
      experience: "Years of experience:",
      projects: "Completed projects:",
      clients: "Satisfied clients:"
    },
    
    // Skills Section
    skills: {
      title: "Skills",
      subtitle: "Technologies and tools I master",
      categories: {
        frontend: "Frontend",
        backend: "Backend",
        design: "Design", 
        tools: "Tools"
      }
    },
    
    // Experience Section
    experience: {
      title: "Experience",
      subtitle: "My professional journey",
      jobs: {
        frontend: {
          title: "Frontend Developer",
          company: "Tech Solutions Inc.",
          period: "2022 - Present",
          description: "Development of modern web applications with React, Vue.js and TypeScript. Leadership in implementing best practices and scalable architectures."
        },
        uxui: {
          title: "UX/UI Designer",
          company: "Digital Agency Co.",
          period: "2020 - 2022", 
          description: "User experience design for mobile and web applications. User research, wireframing, prototyping and usability testing."
        },
        education: {
          title: "Web Development Specialization",
          company: "Technology University",
          period: "2019 - 2020",
          description: "Intensive training in modern web technologies, agile methodologies and user experience principles."
        }
      }
    },
    
    // Projects Section
    projects: {
      title: "Projects",
      subtitle: "Some of my featured work",
      viewProject: "View Project",
      viewCode: "View Code",
      items: {
        portfolio: {
          title: "Personal Portfolio",
          description: "Bilingual personal website with theme system and responsive design developed with HTML5, CSS3 and vanilla JavaScript."
        },
        landing: {
          title: "Corporate Landing Page",
          description: "Modern landing page for tech company with advanced CSS animations and SEO optimization."
        },
        elearning: {
          title: "E-Learning Platform",
          description: "Web application for online courses with admin panel, progress system and interactive assessments."
        }
      }
    },
    
    // Contact Section
    contact: {
      title: "Contact",
      subtitle: "Have a project in mind? Let's talk!",
      info: {
        email: "Email",
        linkedin: "LinkedIn",
        location: "Location",
        locationValue: "Madrid, Spain"
      },
      form: {
        name: "Full name",
        email: "Email address",
        subject: "Subject", 
        message: "Message",
        send: "Send Message"
      },
      notifications: {
        success: "Message sent successfully!",
        error: "Error sending message. Please try again."
      }
    },
    
    // Footer
    footer: {
      copyright: "© 2024 Laura Carvajal. All rights reserved.",
      madeWith: "Made with ❤️ in Spain"
    }
  }
};

/**
 * Clase I18n para manejo de internacionalización
 */
class I18n {
  constructor() {
    this.translations = translations;
    this.currentLanguage = this.getSavedLanguage() || 'es';
  }

  /**
   * Obtiene el idioma guardado del localStorage
   */
  getSavedLanguage() {
    return localStorage.getItem('preferred-language');
  }

  /**
   * Traduce una clave dada
   */
  t(key) {
    const translation = this.translations[this.currentLanguage];
    const keys = key.split('.');
    
    let result = translation;
    for (const k of keys) {
      if (result && typeof result === 'object' && k in result) {
        result = result[k];
      } else {
        console.warn(`Translation key not found: ${key} for language: ${this.currentLanguage}`);
        return key;
      }
    }
    
    return result || key;
  }

  /**
   * Establece el idioma actual
   */
  setLanguage(lang) {
    if (lang === 'es' || lang === 'en') {
      this.currentLanguage = lang;
      localStorage.setItem('preferred-language', lang);
      this.updatePage();
    } else {
      console.warn(`Language not supported: ${lang}`);
    }
  }

  /**
   * Obtiene el idioma actual
   */
  getCurrentLanguage() {
    return this.currentLanguage;
  }

  /**
   * Inicializa el sistema de internacionalización
   */
  init() {
    this.updatePage();
  }

  /**
   * Actualiza todos los elementos de la página
   */
  updatePage() {
    // Actualizar elementos con data-i18n
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(element => {
      const key = element.getAttribute('data-i18n');
      if (key) {
        element.textContent = this.t(key);
      }
    });

    // Actualizar elementos específicos que requieren lógica especial
    this.updateSpecificElements();
  }

  /**
   * Actualiza elementos específicos que no usan data-i18n
   */
  updateSpecificElements() {
    // Actualizar navegación mobile
    const mobileMenuItems = document.querySelectorAll('.mobile-menu a');
    if (mobileMenuItems.length >= 6) {
      mobileMenuItems[0].textContent = this.t('nav.inicio');
      mobileMenuItems[1].textContent = this.t('nav.sobreMi');
      mobileMenuItems[2].textContent = this.t('nav.habilidades');
      mobileMenuItems[3].textContent = this.t('nav.experiencia');
      mobileMenuItems[4].textContent = this.t('nav.proyectos');
      mobileMenuItems[5].textContent = this.t('nav.contacto');
    }

    // Actualizar timeline de experiencia
    const timelineItems = document.querySelectorAll('.timeline-item');
    if (timelineItems.length >= 3) {
      const frontendItem = timelineItems[0];
      const uxuiItem = timelineItems[1];
      const educationItem = timelineItems[2];

      // Frontend Developer
      const frontendTitle = frontendItem.querySelector('h3');
      const frontendCompany = frontendItem.querySelector('h4');
      const frontendDate = frontendItem.querySelector('.timeline-date');
      const frontendDesc = frontendItem.querySelector('p');

      if (frontendTitle) frontendTitle.textContent = this.t('experience.jobs.frontend.title');
      if (frontendCompany) frontendCompany.textContent = this.t('experience.jobs.frontend.company');
      if (frontendDate) frontendDate.textContent = this.t('experience.jobs.frontend.period');
      if (frontendDesc) frontendDesc.textContent = this.t('experience.jobs.frontend.description');

      // UX/UI Designer
      const uxuiTitle = uxuiItem.querySelector('h3');
      const uxuiCompany = uxuiItem.querySelector('h4');
      const uxuiDate = uxuiItem.querySelector('.timeline-date');
      const uxuiDesc = uxuiItem.querySelector('p');

      if (uxuiTitle) uxuiTitle.textContent = this.t('experience.jobs.uxui.title');
      if (uxuiCompany) uxuiCompany.textContent = this.t('experience.jobs.uxui.company');
      if (uxuiDate) uxuiDate.textContent = this.t('experience.jobs.uxui.period');
      if (uxuiDesc) uxuiDesc.textContent = this.t('experience.jobs.uxui.description');

      // Education
      const educationTitle = educationItem.querySelector('h3');
      const educationCompany = educationItem.querySelector('h4');
      const educationDate = educationItem.querySelector('.timeline-date');
      const educationDesc = educationItem.querySelector('p');

      if (educationTitle) educationTitle.textContent = this.t('experience.jobs.education.title');
      if (educationCompany) educationCompany.textContent = this.t('experience.jobs.education.company');
      if (educationDate) educationDate.textContent = this.t('experience.jobs.education.period');
      if (educationDesc) educationDesc.textContent = this.t('experience.jobs.education.description');
    }

    // Actualizar tarjetas de proyectos
    const projectCards = document.querySelectorAll('.project-card');
    if (projectCards.length >= 3) {
      // Portfolio
      const portfolioTitle = projectCards[0].querySelector('h3');
      const portfolioDesc = projectCards[0].querySelector('p');
      if (portfolioTitle) portfolioTitle.textContent = this.t('projects.items.portfolio.title');
      if (portfolioDesc) portfolioDesc.textContent = this.t('projects.items.portfolio.description');

      // Landing Page
      const landingTitle = projectCards[1].querySelector('h3');
      const landingDesc = projectCards[1].querySelector('p');
      if (landingTitle) landingTitle.textContent = this.t('projects.items.landing.title');
      if (landingDesc) landingDesc.textContent = this.t('projects.items.landing.description');

      // E-learning
      const elearningTitle = projectCards[2].querySelector('h3');
      const elearningDesc = projectCards[2].querySelector('p');
      if (elearningTitle) elearningTitle.textContent = this.t('projects.items.elearning.title');
      if (elearningDesc) elearningDesc.textContent = this.t('projects.items.elearning.description');
    }

    // Actualizar información de contacto
    const contactItems = document.querySelectorAll('.contact-info-item');
    if (contactItems.length >= 3) {
      const emailTitle = contactItems[0] ? contactItems[0].querySelector('h4') : null;
      const linkedinTitle = contactItems[1] ? contactItems[1].querySelector('h4') : null;
      const locationTitle = contactItems[2] ? contactItems[2].querySelector('h4') : null;
      const locationValue = contactItems[2] ? contactItems[2].querySelector('p') : null;

      if (emailTitle) emailTitle.textContent = this.t('contact.info.email');
      if (linkedinTitle) linkedinTitle.textContent = this.t('contact.info.linkedin');
      if (locationTitle) locationTitle.textContent = this.t('contact.info.location');
      if (locationValue) locationValue.textContent = this.t('contact.info.locationValue');
    }

    // Actualizar formulario de contacto
    const form = document.querySelector('#contact-form');
    if (form) {
      const nameLabel = form.querySelector('label[for="name"]');
      const emailLabel = form.querySelector('label[for="email"]');
      const subjectLabel = form.querySelector('label[for="subject"]');
      const messageLabel = form.querySelector('label[for="message"]');

      if (nameLabel) nameLabel.textContent = this.t('contact.form.name');
      if (emailLabel) emailLabel.textContent = this.t('contact.form.email');
      if (subjectLabel) subjectLabel.textContent = this.t('contact.form.subject');
      if (messageLabel) messageLabel.textContent = this.t('contact.form.message');
    }

    // Actualizar botón de envío
    const submitButton = document.querySelector('#contact-form button[type="submit"]');
    if (submitButton) {
      submitButton.textContent = this.t('contact.form.send');
    }

    // Actualizar placeholders del formulario
    const nameInput = document.querySelector('#name');
    const emailInput = document.querySelector('#email');
    const subjectInput = document.querySelector('#subject');
    const messageTextarea = document.querySelector('#message');

    if (nameInput) nameInput.placeholder = this.t('contact.form.name');
    if (emailInput) emailInput.placeholder = this.t('contact.form.email');
    if (subjectInput) subjectInput.placeholder = this.t('contact.form.subject');
    if (messageTextarea) messageTextarea.placeholder = this.t('contact.form.message');
  }

  /**
   * Actualiza un elemento específico con contenido
   */
  updateElement(selector, content) {
    const element = document.querySelector(selector);
    if (element) {
      element.textContent = content;
    }
  }

  /**
   * Obtiene mensaje de notificación según el tipo
   */
  getNotification(type) {
    return this.t(`contact.notifications.${type}`);
  }
}

// Instanciar y hacer disponible globalmente
if (typeof window !== 'undefined') {
  window.I18n = I18n;
  window.i18n = new I18n();
}
